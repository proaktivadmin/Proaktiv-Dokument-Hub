---
phase: 07-office-enhancements
plan: 08
type: execute
wave: 4
depends_on: [07-07]
files_modified:
  - frontend/src/components/employees/EmployeeCard.tsx
  - frontend/src/components/employees/EmployeeGrid.tsx
  - frontend/src/app/employees/[id]/page.tsx
  - frontend/src/components/employees/OnboardingChecklist.tsx
autonomous: true
---

<objective>
Integrate SalesScreen sync into employee UI and onboarding flow.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Add SalesScreen to EmployeeCard Dropdown</name>
  <files>frontend/src/components/employees/EmployeeCard.tsx</files>
  <action>
    Add menu item below Entra ID sync:
    ```tsx
    {office?.salesscreen_enabled && (
      <DropdownMenuItem onClick={() => onSalesScreenSync?.(employee)}>
        <Upload className="mr-2 h-4 w-4" />
        Synkroniser til SalesScreen
      </DropdownMenuItem>
    )}
    ```
    
    Add prop: onSalesScreenSync?: (employee: Employee) => void
  </action>
</task>

<task type="auto">
  <name>Task 2: Add SalesScreen Status to EmployeeGrid</name>
  <files>frontend/src/components/employees/EmployeeGrid.tsx</files>
  <action>
    Add SalesScreen connection status next to Entra status:
    ```tsx
    <SalesScreenConnectionStatus 
      onStatusChange={setSalesScreenConnected} 
    />
    ```
    
    Add batch action when employees selected:
    - "Sync X til SalesScreen" button (only if any office has SalesScreen)
    - Opens SalesScreenBatchDialog
  </action>
</task>

<task type="auto">
  <name>Task 3: Add SalesScreen to Employee Detail Page</name>
  <files>frontend/src/app/employees/[id]/page.tsx</files>
  <action>
    Add to Integration section:
    - "SalesScreen" card with sync button
    - Shows if office has SalesScreen enabled
    - If not enabled, show "Not available for this office"
    - Last synced timestamp (if tracked)
  </action>
</task>

<task type="auto">
  <name>Task 4: Create/Update OnboardingChecklist</name>
  <files>frontend/src/components/employees/OnboardingChecklist.tsx</files>
  <action>
    Create or update onboarding checklist component:
    ```tsx
    interface OnboardingStep {
      id: string;
      label: string;
      completed: boolean;
      action?: () => void;
      available: boolean;
    }
    
    // Steps include:
    // - Basic info saved âœ“
    // - Profile photo uploaded
    // - Sync to Entra ID (if configured)
    // - Sync to SalesScreen (if office enabled)
    // - Add to Teams group (if configured)
    ```
    
    Show checklist on employee detail page when status = 'onboarding'
  </action>
</task>

<task type="auto">
  <name>Task 5: Add SalesScreen Batch Dialog</name>
  <files>frontend/src/components/employees/SalesScreenBatchDialog.tsx</files>
  <action>
    Create batch sync dialog:
    - Similar to EntraSyncBatchDialog
    - Shows list of employees to sync
    - Filters to only SalesScreen-enabled offices
    - Shows which employees can't sync and why
    - Progress indicator during sync
    - Summary of results
  </action>
</task>

<task type="auto">
  <name>Task 6: Wire Up Dialogs in Employees Page</name>
  <files>frontend/src/app/employees/page.tsx</files>
  <action>
    Add state and handlers:
    - State for SalesScreenSyncDialog (single)
    - State for SalesScreenBatchDialog (batch)
    - Pass handlers to EmployeeGrid
    - Toast notifications on success/error
    - Refresh grid after sync
  </action>
</task>
</tasks>

<success_criteria>
- SalesScreen sync in card dropdown (when office enabled)
- Batch sync works with multi-select
- Employee detail page shows SalesScreen section
- Onboarding checklist includes SalesScreen step
- Status indicators show connection state
- Success/error toasts display correctly
</success_criteria>
