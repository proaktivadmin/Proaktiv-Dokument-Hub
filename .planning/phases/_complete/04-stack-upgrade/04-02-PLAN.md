---
phase: 04-stack-upgrade
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - frontend/package.json
  - frontend/src/**/*.tsx
  - frontend/src/**/*.ts
autonomous: true
---

<objective>
Upgrade Next.js from 14.1.0 to 15.x and fix async API changes.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Update Next.js dependencies</name>
  <files>frontend/package.json</files>
  <action>
    Update these packages:
    - next: ^15.1.0
    - eslint-config-next: ^15.1.0
  </action>
</task>

<task type="auto">
  <name>Task 2: Run Next.js codemod</name>
  <files>frontend/src/</files>
  <action>
    Run the async API codemod:
    cd frontend && npx @next/codemod@canary next-async-request-api .
    
    This automatically adds await to:
    - cookies()
    - headers()
    - params in page props
    - searchParams in page props
  </action>
</task>

<task type="auto">
  <name>Task 3: Install and build</name>
  <files>-</files>
  <action>Run npm install && npm run build</action>
</task>

<task type="auto">
  <name>Task 4: Fix remaining issues</name>
  <files>varies</files>
  <action>
    Address any issues the codemod missed:
    - Add explicit cache: 'force-cache' if needed for fetch
    - Fix any type errors
  </action>
</task>
</tasks>

<success_criteria>
- Next.js 15.x installed
- All async APIs properly awaited
- npm run build passes
- CVE-2025-29927 fixed
</success_criteria>
