---
phase: 04-stack-upgrade
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - frontend/package.json
  - frontend/tailwind.config.ts
  - frontend/postcss.config.js
  - frontend/src/app/globals.css
autonomous: true
---

<objective>
Upgrade Tailwind CSS from 3.4.1 to 4.x with new CSS-first configuration.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Update Tailwind dependencies</name>
  <files>frontend/package.json</files>
  <action>
    Update/add these packages:
    - tailwindcss: ^4.0.0
    - @tailwindcss/postcss: ^4.0.0
    Remove if present:
    - postcss (now built-in)
  </action>
</task>

<task type="auto">
  <name>Task 2: Run Tailwind upgrade codemod</name>
  <files>frontend/</files>
  <action>
    Run the interactive upgrade:
    cd frontend && npx @tailwindcss/upgrade
    
    Accept changes to:
    - tailwind.config.ts
    - postcss.config.js
    - globals.css
  </action>
</task>

<task type="auto">
  <name>Task 3: Update globals.css</name>
  <files>frontend/src/app/globals.css</files>
  <action>
    Replace @tailwind directives with import:
    
    BEFORE:
    @tailwind base;
    @tailwind components;
    @tailwind utilities;
    
    AFTER:
    @import "tailwindcss";
  </action>
</task>

<task type="auto">
  <name>Task 4: Update PostCSS config</name>
  <files>frontend/postcss.config.js</files>
  <action>
    Update plugin:
    module.exports = {
      plugins: {
        '@tailwindcss/postcss': {},
        autoprefixer: {},
      },
    }
  </action>
</task>

<task type="auto">
  <name>Task 5: Fix renamed utilities</name>
  <files>frontend/src/**/*.tsx</files>
  <action>
    Search and replace:
    - flex-grow -> grow
    - flex-shrink -> shrink
    - bg-opacity-* -> use /50 modifier syntax
    - text-opacity-* -> use /50 modifier syntax
  </action>
</task>

<task type="auto">
  <name>Task 6: Build verification</name>
  <files>-</files>
  <action>Run npm run build && npm run dev, verify styles render correctly.</action>
</task>
</tasks>

<success_criteria>
- Tailwind 4.x installed
- CSS-first config working
- All styles render correctly
- No missing/broken utility classes
</success_criteria>
