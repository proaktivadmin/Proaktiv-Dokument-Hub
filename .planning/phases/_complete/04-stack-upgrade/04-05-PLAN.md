---
phase: 04-stack-upgrade
plan: 05
type: execute
wave: 5
depends_on: ["04-04"]
files_modified:
  - -
autonomous: true
---

<objective>
Deploy upgraded stack to Railway and verify in production.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Commit all changes</name>
  <files>-</files>
  <action>
    Stage and commit:
    git add -A
    git commit -m "feat: upgrade to Next.js 15, React 19, Tailwind 4

    Security: Fixes CVE-2025-29927 (critical auth bypass)
    
    - Next.js 14.1.0 -> 15.1.x
    - React 18.2.0 -> 19.x
    - Tailwind 3.4.1 -> 4.x
    - Updated async APIs (cookies, headers, params)
    - Migrated to CSS-first Tailwind config"
  </action>
</task>

<task type="auto">
  <name>Task 2: Push to Railway</name>
  <files>-</files>
  <action>git push origin main</action>
</task>

<task type="auto">
  <name>Task 3: Monitor deployment</name>
  <files>-</files>
  <action>Watch Railway build logs for errors. Build should complete successfully.</action>
</task>

<task type="auto">
  <name>Task 4: Production verification</name>
  <files>-</files>
  <action>
    Verify on production URL:
    - Dashboard loads
    - Authentication works
    - Templates list and preview work
    - No console errors
  </action>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete stack upgrade: Next.js 15, React 19, Tailwind 4</what-built>
  <how-to-verify>
    1. Check Railway deployment succeeded
    2. Visit production URL
    3. Login, browse dashboard, preview a template
    4. Check browser console for errors
  </how-to-verify>
  <resume-signal>Type approved if production works correctly.</resume-signal>
</task>
</tasks>

<success_criteria>
- Railway deployment succeeds
- Production site functional
- No console errors
- CVE-2025-29927 patched
</success_criteria>
