---
phase: 06-entra-signature-sync
plan: 08
type: execute
wave: 5
depends_on: [06-07]
files_modified:
  - frontend/src/components/employees/EmployeeCard.tsx
  - frontend/src/components/employees/EmployeeGrid.tsx
  - frontend/src/app/employees/page.tsx
  - frontend/src/app/employees/[id]/page.tsx
autonomous: true
---

<objective>
Integrate Entra ID sync functionality into existing employee UI with selection and batch operations.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Add Selection to EmployeeCard</name>
  <files>frontend/src/components/employees/EmployeeCard.tsx</files>
  <action>
    Add optional checkbox for multi-select:
    - New prop: selectable?: boolean
    - New prop: selected?: boolean
    - New prop: onSelectChange?: (selected: boolean) => void
    - Checkbox in top-left corner (when selectable)
    - Visual highlight when selected
    - Checkbox click stops propagation
  </action>
</task>

<task type="auto">
  <name>Task 2: Add Entra Sync to EmployeeCard Dropdown</name>
  <files>frontend/src/components/employees/EmployeeCard.tsx</files>
  <action>
    Add menu items to dropdown:
    - "Synkroniser til Entra ID" (opens EntraSyncDialog)
    - "Forh√•ndsvis signatur" (opens SignaturePreviewDialog)
    
    Only show if Entra ID is connected (prop: entraConnected)
  </action>
</task>

<task type="auto">
  <name>Task 3: Add Selection Mode to EmployeeGrid</name>
  <files>frontend/src/components/employees/EmployeeGrid.tsx</files>
  <action>
    Add multi-select functionality:
    - New state: selectionMode: boolean
    - New state: selectedIds: Set<string>
    - "Velg flere" toggle button
    - "Velg alle synlige" checkbox in header
    - Selection count badge
    - "Avbryt valg" button
    
    When items selected, show action bar:
    - "Synkroniser X til Entra ID" button
    - Opens EntraSyncBatchDialog
  </action>
</task>

<task type="auto">
  <name>Task 4: Add Entra Status to EmployeeGrid</name>
  <files>frontend/src/components/employees/EmployeeGrid.tsx</files>
  <action>
    Add EntraConnectionStatus component next to VitecConnectionStatus.
    Pass connection status to child components.
  </action>
</task>

<task type="auto">
  <name>Task 5: Add Entra Sync to Employee Detail Page</name>
  <files>frontend/src/app/employees/[id]/page.tsx</files>
  <action>
    Add to employee detail page:
    - "Synkroniser til Entra ID" button in header actions
    - Signature preview section in Overview tab
    - Last synced timestamp (if available)
    - Sync status indicator
  </action>
</task>

<task type="auto">
  <name>Task 6: Wire Up Dialogs in Employees Page</name>
  <files>frontend/src/app/employees/page.tsx</files>
  <action>
    Add dialog state and handlers:
    - State for EntraSyncDialog (single employee)
    - State for EntraSyncBatchDialog (selected employees)
    - State for SignaturePreviewDialog
    - Pass handlers to EmployeeGrid
    - Handle success/error with toast notifications
  </action>
</task>
</tasks>

<success_criteria>
- Checkbox selection works for multi-select
- Single employee sync from dropdown works
- Batch sync from selection works
- Signature preview accessible from card and detail
- Connection status visible
- Toast notifications on success/error
- UI consistent with existing patterns
</success_criteria>
